CMAKE_MINIMUM_REQUIRED(VERSION 2.6)
PROJECT(dynamind-gui)

SET(CMAKE_MODULE_PATH  "${dynamind-gui_SOURCE_DIR}/CMake/Packages")

FIND_PACKAGE(PkgConfig)
FIND_PATH(DYNAMIND_INCLUDE_DIR dmnode.h PATH_SUFFIXES dynamindcore)
FIND_LIBRARY(DYNAMIND_CORE_LIBRARY dynamindcore)
FIND_LIBRARY(DYNAMIND_TOOLBOX_LIBRARY dynamindtoolbox)

IF(DYNAMIND_CORE_LIBRARY)
    MESSAGE(STATUS "DYNAMIND_CORE_LIBRARY set to: ${DYNAMIND_CORE_LIBRARY}")
ELSE()
    MESSAGE(STATUS "DYNAMIND_CORE_LIBRARY set to: ${DYNAMIND_CORE_LIBRARY}")
    MESSAGE(FATAL_ERROR "Could not find dynamind core library")
ENDIF()

IF(DYNAMIND_TOOLBOX_LIBRARY)
    MESSAGE(STATUS "DYNAMIND_TOOLBOX_LIBRARY set to: ${DYNAMIND_TOOLBOX_LIBRARY}")
ELSE()
    MESSAGE(FATAL_ERROR "Could not find dynamind toolbox library")
ENDIF()

IF(DYNAMIND_INCLUDE_DIR)
    MESSAGE(STATUS "DYNAMIND_INCLUDE_DIR set to: ${DYNAMIND_INCLUDE_DIR}")
ELSE()
    MESSAGE(FATAL_ERROR "Could not find dynamind header files")
ENDIF()

INCLUDE(FindPackageHandleStandardArgs)

FIND_PACKAGE(Boost 1.38.0 COMPONENTS program_options date_time REQUIRED)
FIND_PACKAGE(Qt4 COMPONENTS QtCore QtGui QtXml QtOpenGL REQUIRED)
FIND_PACKAGE(QGLViewer)
FIND_PACKAGE(OpenGL)
FIND_PACKAGE(OpenGL REQUIRED)

SET(QT_USE_QTWEBKIT 1)
SET(QT_USE_QTXML 1)
SET(QT_USE_QTOPENGL 1)
SET(QT_USE_QTSQL 1)
SET(QT_USE_QTSVG 1)
SET(QT_USE_QTNETWORK 1)

SET(Boost_USE_STATIC_LIBS   OFF)

INCLUDE(${QT_USE_FILE})
INCLUDE_DIRECTORIES( ${Boost_INCLUDE_DIRS} ${DYNAMIND_INCLUDE_DIR} ${QT_QTCORE_INCLUDE_DIR} ${DYNAMIND_INCLUDE_DIR})

IF(CMAKE_BUILD_TYPE STREQUAL Debug)
        MESSAGE(STATUS "Build Type = Debug")
        ADD_DEFINITIONS(-DDEBUG)
ELSE()
        MESSAGE(STATUS "Build Type = Release")
ENDIF()

SET(LIBRARY_OUTPUT_PATH ${dynamind-gui_BINARY_DIR})
SET(EXECUTABLE_OUTPUT_PATH ${dynamind-gui_BINARY_DIR})


ADD_SUBDIRECTORY(src/libdynamind-gui)
ADD_SUBDIRECTORY(src/dynamind-gui)

#INCLUDE(DynaMindGuiCPack.txt)
