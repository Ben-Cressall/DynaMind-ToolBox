CMAKE_MINIMUM_REQUIRED(VERSION 2.6)
PROJECT(dynamind)

OPTION(WITH_TESTS "build unit tests" OFF)
FIND_PACKAGE(PythonLibs REQUIRED)
FIND_PACKAGE(Qt4 COMPONENTS QtCore QtGui QtTest REQUIRED)


SET(QT_USE_QTXML TRUE)
SET(QT_USE_QTTEST TRUE)

INCLUDE(${QT_USE_FILE})

INCLUDE_DIRECTORIES(src/core src/python-swig ${QT_QTCORE_INCLUDE_DIR} ${PYTHON_INCLUDE_PATH})
FIND_PACKAGE(SWIG REQUIRED)
INCLUDE_DIRECTORIES(${PYTHON_INCLUDE_PATH})


IF(CMAKE_BUILD_TYPE STREQUAL Debug)
        MESSAGE(STATUS "Build Type = Debug")
        ADD_DEFINITIONS(-DDEBUG)
ELSE()
        MESSAGE(STATUS "Build Type = Release")
ENDIF()

IF(DYNAMIND_TOOLBOX_BUILD_DIR)
    SET(LIBRARY_OUTPUT_PATH ${DYNAMIND_TOOLBOX_BUILD_DIR})
    SET(EXECUTABLE_OUTPUT_PATH ${DYNAMIND_TOOLBOX_BUILD_DIR})
    SET(SCRIPT_PATH ${DYNAMIND_TOOLBOX_BUILD_DIR}/PythonModules )
ELSE()
    SET(LIBRARY_OUTPUT_PATH ${dynamind_BINARY_DIR})
    SET(EXECUTABLE_OUTPUT_PATH ${dynamind_BINARY_DIR})
    SET(SCRIPT_PATH ${dynamind_BINARY_DIR}/PythonModules )
ENDIF()


ADD_SUBDIRECTORY(src/core)
ADD_SUBDIRECTORY(src/python-swig)
ADD_SUBDIRECTORY(src/DMTestModules)
ADD_SUBDIRECTORY(src/DMToolboxes)
ADD_SUBDIRECTORY(scripts)
if (WITH_TESTS)
ADD_SUBDIRECTORY(src/unit-test)
endif (WITH_TESTS)

ADD_SUBDIRECTORY(CMake)

#INCLUDE(DynaMindCPack.txt)
