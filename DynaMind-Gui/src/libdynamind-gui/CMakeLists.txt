INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR} ${CMAKE_BINARY_DIR})
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})

FILE(GLOB CPP_GUI_FILES *.cpp)
FILE(GLOB H_GUI_FILES *.h)
FILE(GLOB UI_FILES *.ui)

IF(USEQT5)
    QT5_WRAP_UI(CPP_GUI_FILES ${UI_FILES})
    QT5_ADD_RESOURCES(CPP_GUI_FILES icons.qrc splash.qrc)
ELSE()
    QT4_WRAP_UI(CPP_GUI_FILES ${UI_FILES})
    QT4_ADD_RESOURCES(CPP_GUI_FILES icons.qrc splash.qrc)
ENDIF()
INCLUDE_DIRECTORIES(../3dparty/alglib/src)
if(WITH_VIEWER)
	INCLUDE_DIRECTORIES( ${QGLVIEWER_INCLUDE_DIR} )
	INCLUDE_DIRECTORIES(../../DynaMind-Viewer/src)
ENDIF()
ADD_LIBRARY(dynamindgui STATIC ${CPP_GUI_FILES} ${H_GUI_FILES} ${QWT_CPPS} ${QTGL_CPPS} ${ALGLIB_CPP})

SET_TARGET_PROPERTIES(dynamindgui PROPERTIES AUTOMOC TRUE)

IF(${CMAKE_CXX_COMPILER_ID} STREQUAL GNU)
        SET_TARGET_PROPERTIES(dynamindgui PROPERTIES COMPILE_FLAGS "-frounding-math -fPIC")
ENDIF()

IF(USEQT5)
	if(WITH_VIEWER)
		add_definitions( -DVIEWER )
                TARGET_LINK_LIBRARIES(dynamindgui dynamind-viewer Qt5::Gui  Qt5::WebEngineWidgets ${DYNAMIND_CORE_LIBRARY} )
	ELSE()
            IF(CMAKE_SYSTEM_NAME STREQUAL Linux)
                TARGET_LINK_LIBRARIES(dynamindgui Qt5::Gui Qt5::WebKit Qt5::WebKitWidgets ${DYNAMIND_CORE_LIBRARY} )
            ELSE()
                TARGET_LINK_LIBRARIES(dynamindgui Qt5::Gui Qt5::WebEngineWidgets ${DYNAMIND_CORE_LIBRARY} )
            ENDIF()
	ENDIF()
ELSE()
    if(WITH_VIEWER)
        add_definitions( -DVIEWER )
	TARGET_LINK_LIBRARIES(dynamindgui dynamind-viewer ${DYNAMIND_CORE_LIBRARY} ${QT_QTMAIN_LIBRARY} ${QT_LIBRARIES})
       ELSE()
        TARGET_LINK_LIBRARIES(dynamindgui ${DYNAMIND_CORE_LIBRARY} ${QT_QTMAIN_LIBRARY} ${QT_LIBRARIES})
       ENDIF()
ENDIF()


#INSTALL(TARGETS dynamindgui
#        DESTINATION "lib"
#		PERMISSIONS OWNER_WRITE OWNER_READ OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE)
